Search.setIndex({"docnames": ["meta/background", "meta/implementation", "meta/installation", "meta/intro", "meta/troubleshooting", "notebooks/getting-started", "notebooks/model-evaluation-demo", "notebooks/segmented-power-law-demo", "notebooks/spline-demo"], "filenames": ["meta/background.md", "meta/implementation.md", "meta/installation.md", "meta/intro.md", "meta/troubleshooting.md", "notebooks/getting-started.ipynb", "notebooks/model-evaluation-demo.ipynb", "notebooks/segmented-power-law-demo.ipynb", "notebooks/spline-demo.ipynb"], "titles": ["&lt;no title&gt;", "Implementation", "Installation", "<code class=\"docutils literal notranslate\"><span class=\"pre\">ratingcurve</span></code>", "Troubleshooting", "Getting Started", "Model evaluation", "Fitting a Stage-Discharge Rating using a Segmented", "Spline demo"], "terms": {"streamflow": [0, 1, 3], "timeseri": [0, 3], "ar": [0, 1, 3, 5, 7, 8], "wide": 0, "us": [0, 1, 2, 3, 5, 6], "hydrolog": [0, 3], "research": 0, "water": [0, 3], "resourc": 0, "manag": 0, "flood": 0, "forecast": 0, "thei": [0, 1, 8], "difficult": 0, "measur": [0, 3], "directli": 0, "In": [0, 3, 5, 6, 7, 8], "nearli": [0, 3], "all": [0, 3], "applic": 0, "estim": [0, 1, 3], "from": [0, 1, 3, 5, 6, 7, 8], "rate": [0, 1, 3, 6, 8], "curv": [0, 1, 3, 7, 8], "describ": 0, "relationship": [0, 3], "between": [0, 1, 3, 6], "an": [0, 1, 2, 3], "easi": [0, 1, 3, 8], "predictor": [0, 3], "like": [0, 1, 3], "stage": [0, 1, 3, 5, 6, 8], "The": [0, 1, 5, 7], "shape": [0, 7], "specif": [0, 7], "each": [0, 1, 6, 7], "streamgag": 0, "govern": 0, "channel": [0, 1, 5, 6, 7, 8], "condit": 0, "downstream": 0, "gage": 0, "refer": 0, "control": [0, 1], "section": [0, 7], "riffl": 0, "weir": 0, "occur": [0, 1], "wherea": 0, "geometri": 0, "bank": 0, "regardless": 0, "type": [0, 6], "behavior": 0, "often": 0, "well": [0, 1], "approxim": [0, 1], "standard": [0, 3, 7], "equat": 0, "take": [0, 7], "gener": [0, 1, 6], "form": [0, 8], "power": [0, 3, 5, 6, 7], "law": [0, 3, 6, 7], "locat": [0, 1], "paramet": [0, 1, 7], "begin": [0, 1, 7], "q": [0, 1, 5, 6, 7, 8], "c": [0, 2, 7], "h": [0, 1, 5, 6, 7, 8], "h_0": 0, "b": [0, 1, 7], "end": [0, 1, 7], "where": [0, 1, 7], "discharg": [0, 1, 3, 6, 8], "height": 0, "abov": 0, "some": [0, 1, 3, 6, 7], "datum": 0, "zero": [0, 1], "flow": [0, 1], "offset": [0, 1], "hydraul": 0, "head": [0, 7], "citep": [0, 1], "iso18320_2020": 0, "slope": [0, 1, 7], "when": [0, 2], "plot": [0, 1, 5, 6, 7, 8], "log": [0, 6, 7], "space": 0, "scale": 0, "factor": 0, "equal": 0, "one": [0, 1, 3, 7], "multipl": 0, "present": 0, "divid": [0, 1], "segment": [0, 1, 3, 5, 6, 8], "correspond": 0, "result": [0, 3, 7, 8], "multi": [0, 3, 7], "compound": 0, "though": [0, 1], "sever": [0, 1, 3, 5, 7], "autom": [0, 3], "method": [0, 3, 6, 7, 8], "exist": 0, "most": [0, 3, 5, 6, 7, 8], "still": [0, 3], "fit": [0, 1, 3, 5, 6, 8], "hand": [0, 3], "graphic": 0, "With": [0, 1], "appropri": 0, "can": [0, 1, 2, 3, 6, 7, 8], "straight": 0, "line": [0, 1, 5, 6, 7, 8], "kennedy_1984": 0, "variant": 0, "thi": [0, 3, 6, 7], "have": [0, 7, 8], "been": 0, "decad": 0, "first": [0, 1, 7], "pencil": 0, "paper": 0, "now": [0, 2, 6, 7], "comput": [0, 6], "aid": 0, "softwar": [0, 7], "done": 0, "manual": 0, "adjust": [0, 1, 7], "until": 0, "accept": 0, "achiev": 0, "while": [0, 1, 7], "singl": 0, "rel": [0, 1], "venetis_1970": 0, "more": [0, 1, 3, 7], "challeng": 0, "becaus": 0, "solut": 0, "multimod": 0, "mean": [0, 1, 7], "ha": 0, "optima": 0, "reitan_2006": 0, "As": [0, 1, 3, 6, 8], "optim": 0, "algorithm": [0, 1, 3], "becom": [0, 1], "stuck": 0, "local": 0, "fail": [0, 7], "converg": 0, "global": 0, "optimum": 0, "function": [0, 1, 7], "natur": [0, 7], "spline": [0, 3], "fenton_2018": 0, "neural": 0, "network": 0, "easier": [0, 3], "come": 0, "cost": 0, "match": 0, "uniform": [0, 6, 7], "open": [0, 1, 2, 7], "man": 0, "manning_1891": 0, "due": 0, "physic": [0, 1], "basi": 0, "potenti": 0, "robust": 0, "than": [0, 7, 8], "other": [0, 1, 3, 6], "requir": [0, 8], "less": [0, 1, 8], "data": [0, 3, 5, 6], "same": 0, "being": [0, 1, 8], "prone": [0, 3], "overfit": 0, "basic": 0, "compar": [0, 6], "its": [0, 1], "perform": [0, 1], "against": [0, 6], "similar": [0, 1], "alreadi": 0, "notabl": 0, "those": 0, "citet": [0, 1], "reitan_2008": [0, 1], "le_coz_2014": 0, "so": 0, "call": [0, 1, 2, 3, 5, 6, 7, 8], "hrafnkelsson_2021": 0, "here": [0, 1, 6, 7], "exampl": [0, 8], "bayesian": [0, 1], "util": 0, "prior": [0, 6, 7], "inform": [0, 6], "help": [0, 6], "constrain": [0, 8], "reduc": 0, "simpl": [0, 1], "includ": [0, 5], "expon": 0, "narrow": 0, "rang": [0, 1], "around": 0, "valu": [0, 7], "5": [0, 7, 8], "3": [0, 6, 7, 8], "number": [0, 1, 6, 7], "transit": 0, "particular": [0, 1], "Being": 0, "also": [0, 5], "inher": 0, "uncertainti": [0, 1, 7], "which": [0, 1, 3, 6, 7], "import": [0, 3, 5, 6, 7, 8], "mani": 0, "our": [0, 1], "differenti": [0, 1], "itself": [0, 1], "two": 0, "main": 0, "wai": [0, 3], "minim": [0, 6], "reproduc": 0, "hydrologist": 0, "both": 0, "fast": [0, 8], "user": [0, 1, 2, 7], "need": [0, 1, 7], "onli": [0, 7], "provid": 0, "pair": 0, "specifi": [0, 1], "even": [0, 1], "infer": [0, 1, 7], "second": 0, "implement": [0, 3], "python": [0, 1, 2, 3], "popular": 0, "commun": [0, 1], "develop": [0, 1], "sourc": [0, 1], "probabilist": [0, 1, 3], "program": [0, 1], "librari": [0, 1, 3, 7], "underli": 0, "numer": 0, "code": [0, 1], "maintain": 0, "broader": 0, "enabl": 0, "focu": 0, "nuanc": 0, "parameter": 0, "model": [0, 1, 3, 5], "make": [0, 1, 7], "extend": [0, 1, 3], "modifi": [0, 1, 3], "switch": [0, 1], "differ": [0, 1, 7], "tradeoff": [0, 1], "speed": [0, 1], "accuraci": [0, 1], "we": [1, 3, 6, 7], "along": 1, "addit": 1, "evalu": [1, 3, 7], "tool": 1, "test": [1, 3, 5, 7], "dataset": [1, 3, 7, 8], "tutori": [1, 5, 6, 7], "packag": [1, 3, 5], "texttt": [1, 3], "ratingcurv": [1, 2, 5, 6, 7, 8], "written": 1, "pymc": [1, 6, 7, 8], "salvatier_2016": 1, "statist": 1, "machin": [1, 3], "learn": [1, 3], "framework": 1, "core": [1, 7], "express": 1, "chang": 1, "structur": 1, "trade": 1, "off": 1, "demonstr": [1, 6, 7], "faster": 1, "automat": 1, "variat": [1, 7], "advi": [1, 6, 7, 8], "kucukelbir_2017": 1, "accur": 1, "hamiltonian": 1, "mont": 1, "carlo": 1, "No": [1, 5, 6, 7, 8], "u": 1, "turn": 1, "sampler": 1, "nut": [1, 7], "hoffman_2014": 1, "equival": 1, "adapt": 1, "muggeo_2003": 1, "piecewis": 1, "regress": 1, "align": [1, 7], "label": 1, "eq": 1, "ln": 1, "max": 1, "h_": 1, "0": [1, 6, 7, 8], "h_o": 1, "w": [1, 7], "t": 1, "epsilon": 1, "vector": [1, 7], "contain": [1, 7], "breakpoint": [1, 7], "rest": 1, "1": [1, 5, 6, 7, 8], "element": 1, "wise": 1, "maximum": 1, "return": 1, "size": 1, "bia": 1, "weight": 1, "error": [1, 3, 6], "separ": 1, "increas": [1, 7], "among": 1, "fill": 1, "bottom": 1, "up": 1, "how": [1, 6, 7], "activ": [1, 2], "onc": [1, 7], "rise": 1, "beyond": 1, "drown": 1, "out": 1, "ceas": 1, "simpler": 1, "new": [1, 2, 7], "effect": 1, "never": 1, "success": 1, "w_i": 1, "term": 1, "cumul": 1, "base": [1, 7], "w_1": 1, "unless": 1, "er": 1, "parametr": 1, "better": [1, 7], "might": 1, "intend": 1, "updat": 1, "them": [1, 5], "current": 1, "document": 1, "do": 1, "besid": 1, "select": [1, 2, 6, 7], "distribut": [1, 6, 7], "default": 1, "assum": 1, "uniformli": 1, "work": 1, "altern": 1, "normal": [1, 7], "had": 1, "evid": 1, "expect": [1, 6], "about": [1, 6], "varianc": 1, "sigma": [1, 7], "2": [1, 5, 6, 7, 8], "sim": 1, "n": [1, 2, 6, 7, 8], "That": 1, "simplif": 1, "creat": 1, "unaccount": 1, "heteroscedast": 1, "petersen_overleir_2004": 1, "yield": 1, "reason": 1, "could": [1, 3], "incorpor": 1, "intent": 1, "defin": [1, 3, 7], "baselin": 1, "todo": [1, 4, 8], "avaiabl": 2, "pypi": 2, "conda": 2, "forg": 2, "pip": [2, 7], "If": [2, 7], "notebook": [2, 7], "consid": 2, "build": 2, "ipykernel": 2, "acreat": 2, "add": [2, 6], "m": 2, "name": [2, 5, 6, 7, 8], "lab": 2, "kernel": 2, "launcher": 2, "A": 3, "variabl": 3, "costli": 3, "mathemat": 3, "surfac": 3, "elev": 3, "despit": 3, "time": 3, "consum": 3, "To": 3, "promot": 3, "widespread": 3, "reimplement": 3, "classic": [3, 7], "modern": 3, "serv": 3, "benchmark": 3, "instal": [3, 7], "get": 3, "start": 3, "demo": [3, 7], "simul": 3, "versu": 3, "residu": 3, "troubleshoot": 3, "tip": 4, "trick": 4, "ratingmodel": [5, 6, 7, 8], "powerlawr": [5, 6, 7, 8], "load": [5, 6, 8], "df": [5, 6, 7, 8], "green": [5, 6, 7, 8], "initi": 5, "powerr": [5, 6, 7], "q_sigma": [5, 6, 7, 8], "trace": [5, 6, 7, 8], "modulenotfounderror": [5, 6, 7, 8], "traceback": [5, 6, 7, 8], "recent": [5, 6, 7, 8], "last": [5, 6, 7, 8], "cell": [5, 6, 7, 8], "4": [5, 6, 7, 8], "modul": [5, 6, 7, 8], "tabl": [5, 7], "list": [5, 7, 8], "case": 6, "mai": [6, 7, 8], "know": [6, 7], "wish": 6, "For": [6, 7, 8], "criteria": 6, "best": 6, "load_ext": [6, 7, 8], "autoreload": [6, 7, 8], "xmode": 6, "suppress": 6, "warn": [6, 7], "pm": [6, 7, 8], "arviz": [6, 7, 8], "az": [6, 7, 8], "get_ipython": 6, "run_line_mag": 6, "determin": 6, "captur": [6, 7], "output": 6, "supress": 6, "print": [6, 7], "finish": [6, 7, 8], "after": [6, 7], "run": [6, 7], "four": 6, "100_000": [6, 8], "append": 6, "compute_log_likelihood": 6, "arg": 6, "likelihood": 6, "format": [6, 7], "loo": 6, "filterwarn": 6, "ignor": 6, "compare_dict": 6, "f": 6, "i": [6, 7], "ic": 6, "wa": 6, "rank": 6, "highest": 6, "practic": 6, "deviat": 6, "observ": [6, 7], "matplotlib": 6, "pyplot": 6, "plt": 6, "mean_field": [6, 7, 8], "150_000": [6, 7], "sampl": [6, 7, 8], "5000": [6, 7, 8], "fig": 6, "ax": [6, 7, 8], "subplot": 6, "figsiz": 6, "7": [6, 7], "sharei": 6, "true": [6, 7], "plot_residu": 6, "subplots_adjust": 6, "wspace": 6, "set_ylabel": [6, 7, 8], "There": 7, "approach": [7, 8], "googl": 7, "colab": 7, "It": 7, "minut": 7, "repo": 7, "version": 7, "env": 7, "mkl_threading_lay": 7, "gnu": 7, "git": 7, "http": 7, "github": 7, "com": 7, "thodson": 7, "usg": 7, "spliner": [7, 8], "6": [7, 8], "chalk": 7, "artifici": 7, "co": 7, "provo": 7, "datetim": 7, "2020": 7, "05": 7, "21": 7, "14": 7, "13": 7, "41": 7, "utc": 7, "07": 7, "00": [7, 8], "04": [7, 8], "12199": 7, "342": 7, "199": 7, "172931": 7, "16": 7, "55": 7, "31": 7, "43": 7, "4921": 7, "953": 7, "95": 7, "425619": 7, "03": 7, "54": 7, "10": [7, 8], "99": 7, "2331": 7, "665": 7, "61": 7, "860500": 7, "51": 7, "94": 7, "2289": 7, "220": 7, "47": 7, "886745": 7, "01": 7, "23": 7, "11": 7, "32": 7, "96": 7, "2408": 7, "210": 7, "522964": 7, "scatter": [7, 8], "x": [7, 8], "y": [7, 8], "marker": [7, 8], "o": [7, 8], "set_xlabel": [7, 8], "cf": [7, 8], "ft": [7, 8], "compil": 7, "slower": 7, "set": 7, "iter": [7, 8], "stop": 7, "loss": [7, 8], "decreas": 7, "120_000": 7, "100": [7, 8], "120000": 7, "lt": [7, 8], "averag": [7, 8], "49": 7, "281": 7, "273": 7, "mnt": 7, "onedr": 7, "doi": 7, "desktop": 7, "project": 7, "releas": 7, "py": 7, "318": 7, "runtimewarn": 7, "invalid": 7, "encount": 7, "b1": 7, "np": [7, 8], "h_tile": 7, "hs": 7, "clip": 7, "h0": 7, "20": 7, "1365": 7, "65": 7, "0154": 7, "1378": 7, "06": 7, "22": 7, "1390": 7, "0153": 7, "1402": 7, "89": 7, "24": [7, 8], "1415": 7, "0152": 7, "what": 7, "happen": 7, "choos": 7, "wrong": 7, "rerun": 7, "correct": 7, "topic": 7, "blob": 7, "master": 7, "ipynb": 7, "allow": 7, "you": 7, "scheme": 7, "affect": 7, "simulated_r": 7, "sim_df": [7, 8], "len": 7, "763": 7, "everi": 7, "inch": 7, "increment": 7, "much": 7, "d": 7, "try": [7, 8], "15": 7, "30": [7, 8], "see": 7, "subsampl": [7, 8], "random_st": [7, 8], "12345": 7, "color": [7, 8], "grei": 7, "ls": [7, 8], "legend": [7, 8], "fals": [7, 8], "blue": [7, 8], "text": [7, 8], "none": 7, "mu": 7, "8": [7, 8], "necessari": 7, "150000": 7, "532": 7, "501": 7, "visual": 7, "summari": 7, "var_nam": 7, "valid": 7, "input_shap": 7, "minimum_shap": 7, "chain": 7, "draw": 7, "sd": 7, "hdi_3": 7, "hdi_97": 7, "mcse_mean": 7, "mcse_sd": 7, "ess_bulk": 7, "ess_tail": 7, "r_hat": 7, "968": 7, "001": 7, "965": 7, "971": 7, "000": 7, "4363": 7, "4715": 7, "nan": 7, "072": 7, "004": 7, "065": 7, "079": 7, "5119": 7, "4678": 7, "308": 7, "006": 7, "297": 7, "319": 7, "4866": 7, "4850": 7, "999": 7, "002": 7, "003": 7, "996": 7, "5085": 7, "4869": 7, "010": 7, "007": 7, "012": 7, "4792": 7, "4901": 7, "932": 7, "930": 7, "933": 7, "5105": 7, "4897": 7, "9": 7, "517": 7, "098": 7, "326": 7, "694": 7, "4540": 7, "4761": 7, "759": 7, "030": 7, "702": 7, "814": 7, "5003": 7, "4861": 7, "tricki": 7, "appear": 7, "poor": [7, 8], "step": 7, "strong": 7, "impli": 7, "within": 7, "final": 7, "anoth": [7, 8], "typic": 7, "underestim": 7, "struggl": 7, "modal": 7, "give": [7, 8], "substanti": 7, "depend": 7, "your": 7, "cpu": 7, "tune": 7, "1500": 7, "target_accept": 7, "sum_": 7, "b_i": 7, "x_": 7, "h_i": 7, "x_o": 7, "heavisid": 7, "linear": 7, "repres": 7, "respect": 7, "input": 7, "b_o": 7, "subsequ": 7, "advantag": 8, "veri": 8, "produc": 8, "strang": 8, "particularli": 8, "small": 8, "numpi": 8, "spline_r": 8, "fewer": 8, "70_000": 8, "70000": 8, "02": 8, "36": 8, "502": 8, "495": 8, "grai": 8, "100000": 8, "764": 8, "762": 8, "unexpectedli": 8, "771": 8}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"implement": 1, "parameter": [1, 7], "prior": 1, "optim": 1, "set": 1, "instal": 2, "creat": 2, "jupyt": 2, "environ": 2, "ratingcurv": 3, "troubleshoot": 4, "get": 5, "start": 5, "demo": [5, 8], "dataset": 5, "model": [6, 7], "evalu": 6, "residu": 6, "fit": 7, "stage": 7, "discharg": 7, "rate": 7, "us": 7, "segment": 7, "load": 7, "data": [7, 8], "setup": 7, "exercis": 7, "simul": [7, 8], "exampl": 7, "spline": 8, "excercis": 8, "versu": 8, "power": 8, "law": 8}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 6, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "sphinxcontrib.bibtex": 9, "sphinx": 56}})