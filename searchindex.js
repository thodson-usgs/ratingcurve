Search.setIndex({"docnames": ["api", "meta/background", "meta/implementation", "meta/installation", "meta/intro", "meta/troubleshooting", "notebooks/getting-started-tutorial", "notebooks/model-selection-tutorial", "notebooks/segmented-power-law-tutorial", "notebooks/spline-tutorial"], "filenames": ["api.rst", "meta/background.md", "meta/implementation.md", "meta/installation.md", "meta/intro.md", "meta/troubleshooting.md", "notebooks/getting-started-tutorial.ipynb", "notebooks/model-selection-tutorial.ipynb", "notebooks/segmented-power-law-tutorial.ipynb", "notebooks/spline-tutorial.ipynb"], "titles": ["API documentation", "&lt;no title&gt;", "Implementation", "Installation", "<code class=\"docutils literal notranslate\"><span class=\"pre\">ratingcurve</span></code>", "Troubleshooting", "Getting Started", "Model selection", "Fitting a Stage-Discharge Rating using a Segmented", "Natural Splines"], "terms": {"streamflow": [1, 2, 4], "timeseri": [1, 4], "ar": [1, 2, 4, 5, 6, 7, 8, 9], "wide": 1, "us": [1, 2, 3, 4, 5, 6, 7, 9], "hydrolog": [1, 4], "research": 1, "water": [1, 4], "resourc": 1, "manag": 1, "flood": 1, "forecast": 1, "thei": [1, 2, 9], "difficult": 1, "measur": [1, 4, 7], "directli": 1, "In": [1, 4, 6, 7, 8, 9], "nearli": [1, 4], "all": [1, 4], "applic": 1, "estim": [1, 2, 4, 7], "from": [1, 2, 4, 6, 7, 8, 9], "rate": [1, 2, 4, 5, 7], "curv": [1, 2, 4, 8, 9], "describ": 1, "relationship": [1, 4], "between": [1, 2, 4, 7], "an": [1, 2, 3, 4, 7, 9], "easi": [1, 2, 4, 9], "predictor": [1, 4], "like": [1, 2, 4], "stage": [1, 2, 4, 6, 7, 9], "The": [1, 2, 5, 6, 8], "shape": [1, 8], "specif": [1, 5, 7, 8], "each": [1, 2, 7, 8], "streamgag": 1, "govern": 1, "channel": [1, 2, 6, 7, 8, 9], "condit": 1, "downstream": 1, "gage": 1, "refer": [1, 7], "control": [1, 2], "section": [1, 8], "riffl": 1, "weir": 1, "occur": [1, 2, 5], "wherea": 1, "geometri": 1, "bank": 1, "regardless": 1, "type": [1, 7, 9], "behavior": 1, "often": 1, "well": [1, 2, 9], "approxim": [1, 2], "standard": [1, 4, 8], "equat": 1, "take": [1, 8], "gener": [1, 2, 5, 7], "form": [1, 9], "power": [1, 5, 6, 7, 8, 9], "law": [1, 5, 7, 8, 9], "locat": [1, 2], "paramet": [1, 2, 8], "begin": [1, 2, 5, 7, 8], "q": [1, 2, 6, 7, 8, 9], "c": [1, 3, 8], "h": [1, 2, 6, 7, 8, 9], "h_0": 1, "b": [1, 2, 8], "end": [1, 2, 8], "where": [1, 2, 8], "discharg": [1, 2, 4, 7, 9], "height": 1, "abov": 1, "some": [1, 2, 4, 8], "datum": 1, "zero": [1, 2], "flow": [1, 2], "offset": [1, 2], "hydraul": 1, "head": [1, 8], "citep": [1, 2], "iso18320_2020": 1, "slope": [1, 2, 8], "when": [1, 3], "plot": [1, 2, 6, 7, 8, 9], "log": [1, 7, 8], "space": 1, "scale": 1, "factor": 1, "equal": 1, "one": [1, 2, 4, 7, 8], "multipl": 1, "present": 1, "divid": [1, 2], "segment": [1, 2, 4, 5, 6, 7, 9], "correspond": 1, "result": [1, 4, 5, 8, 9], "multi": [1, 4, 5, 8, 9], "compound": 1, "though": [1, 2], "sever": [1, 2, 4, 6, 8], "autom": [1, 4], "method": [1, 4, 7, 8, 9], "exist": 1, "most": [1, 4, 6, 7, 8, 9], "still": [1, 4], "fit": [1, 2, 4, 6, 9], "hand": [1, 4, 5], "graphic": 1, "With": [1, 2], "appropri": 1, "can": [1, 2, 3, 4, 5, 7, 8, 9], "straight": 1, "line": [1, 2, 6, 7, 8, 9], "kennedy_1984": 1, "variant": 1, "thi": [1, 4, 5, 7, 8], "have": [1, 7, 8, 9], "been": 1, "decad": 1, "first": [1, 2, 8], "pencil": 1, "paper": 1, "now": [1, 3, 7, 8], "comput": [1, 7], "aid": 1, "softwar": [1, 8], "done": 1, "manual": 1, "adjust": [1, 2, 8], "until": 1, "accept": [1, 5], "achiev": 1, "while": [1, 2, 8], "singl": 1, "rel": [1, 2], "venetis_1970": 1, "more": [1, 2, 4, 5, 7, 8], "challeng": 1, "becaus": 1, "solut": 1, "multimod": 1, "mean": [1, 2, 8], "ha": 1, "optima": 1, "reitan_2006": 1, "As": [1, 2, 4, 5, 7, 9], "optim": 1, "algorithm": [1, 2, 4], "becom": [1, 2], "stuck": 1, "local": 1, "fail": [1, 5, 8], "converg": [1, 5, 9], "global": 1, "optimum": 1, "function": [1, 2, 8, 9], "natur": [1, 4, 8], "spline": [1, 4], "fenton_2018": 1, "neural": 1, "network": 1, "easier": [1, 4], "come": 1, "cost": 1, "match": 1, "uniform": [1, 7, 8], "open": [1, 2, 3, 8], "man": 1, "manning_1891": 1, "due": 1, "physic": [1, 2], "basi": 1, "potenti": 1, "robust": 1, "than": [1, 5, 7, 8, 9], "other": [1, 2, 4, 9], "requir": 1, "less": [1, 2, 9], "data": [1, 6, 9], "same": 1, "being": [1, 2, 9], "prone": [1, 4], "overfit": 1, "basic": 1, "compar": [1, 7], "its": [1, 2], "perform": [1, 2, 5, 7], "against": [1, 7], "similar": [1, 2], "alreadi": 1, "notabl": 1, "those": 1, "citet": [1, 2], "reitan_2008": [1, 2], "le_coz_2014": 1, "so": 1, "call": [1, 2, 3, 4, 6, 7, 8, 9], "hrafnkelsson_2021": 1, "here": [1, 2, 7, 8, 9], "exampl": [1, 9], "bayesian": [1, 2], "util": 1, "prior": [1, 5, 7, 8], "inform": [1, 7], "help": [1, 7], "constrain": [1, 9], "reduc": [1, 5], "simpl": [1, 2], "includ": [1, 6], "expon": 1, "narrow": 1, "rang": [1, 2], "around": 1, "valu": [1, 8], "5": [1, 8, 9], "3": [1, 7, 8, 9], "number": [1, 2, 5, 7, 8], "transit": 1, "particular": [1, 2], "Being": 1, "also": [1, 6], "inher": 1, "uncertainti": [1, 2, 5, 8], "which": [1, 2, 4, 5, 7, 8], "import": [1, 4, 6, 7, 8, 9], "mani": 1, "our": [1, 2], "differenti": [1, 2], "itself": [1, 2], "two": 1, "main": 1, "wai": [1, 4, 7], "minim": [1, 7], "reproduc": 1, "hydrologist": 1, "both": 1, "fast": [1, 9], "user": [1, 2, 3, 8], "need": [1, 2, 8], "onli": [1, 8], "provid": 1, "pair": 1, "specifi": [1, 2, 5], "even": [1, 2], "infer": [1, 2, 8], "second": 1, "implement": [1, 4], "python": [1, 2, 3, 4], "popular": 1, "commun": [1, 2], "develop": [1, 2], "sourc": [1, 2], "probabilist": [1, 2, 4], "program": [1, 2], "librari": [1, 2, 4, 8], "underli": 1, "numer": 1, "code": [1, 2], "maintain": 1, "broader": 1, "enabl": 1, "focu": 1, "nuanc": 1, "parameter": 1, "model": [1, 2, 4, 5, 6], "make": [1, 2, 8], "extend": [1, 2, 4], "modifi": [1, 2, 4], "switch": [1, 2], "differ": [1, 2, 8], "tradeoff": [1, 2], "speed": [1, 2], "accuraci": [1, 2], "we": [2, 4, 7, 8], "along": 2, "addit": 2, "evalu": [2, 8], "tool": 2, "test": [2, 4, 6, 8], "dataset": [2, 4, 8, 9], "tutori": [2, 6, 7, 8], "packag": [2, 4, 6], "texttt": [2, 4], "ratingcurv": [2, 3, 6, 7, 8, 9], "written": 2, "pymc": [2, 7, 8, 9], "salvatier_2016": 2, "statist": 2, "machin": [2, 4], "learn": [2, 4], "framework": 2, "core": [2, 8], "express": 2, "chang": 2, "structur": 2, "trade": 2, "off": 2, "demonstr": [2, 7, 8], "faster": [2, 9], "automat": 2, "variat": [2, 8], "advi": [2, 7, 8, 9], "kucukelbir_2017": 2, "accur": [2, 5], "hamiltonian": 2, "mont": 2, "carlo": 2, "No": [2, 6, 7, 8, 9], "u": 2, "turn": 2, "sampler": 2, "nut": [2, 8], "hoffman_2014": 2, "equival": 2, "adapt": 2, "muggeo_2003": 2, "piecewis": 2, "regress": 2, "align": [2, 8], "label": 2, "eq": 2, "ln": 2, "max": 2, "h_": 2, "0": [2, 5, 7, 8], "h_o": 2, "w": [2, 8], "t": [2, 7], "epsilon": 2, "vector": [2, 8], "contain": [2, 8], "breakpoint": [2, 5, 8], "rest": 2, "1": [2, 6, 7, 8, 9], "element": 2, "wise": 2, "maximum": 2, "return": 2, "size": 2, "bia": 2, "weight": 2, "error": [2, 4, 7], "separ": 2, "increas": [2, 5, 8], "among": 2, "fill": 2, "bottom": 2, "up": 2, "how": [2, 5, 7, 8], "activ": [2, 3], "onc": [2, 8], "rise": 2, "beyond": 2, "drown": 2, "out": [2, 7], "ceas": 2, "simpler": [2, 9], "new": [2, 3, 7, 8], "effect": 2, "never": 2, "success": 2, "w_i": 2, "term": 2, "cumul": 2, "base": [2, 8], "w_1": 2, "unless": 2, "er": 2, "parametr": 2, "better": [2, 7, 8], "might": [2, 5], "intend": 2, "updat": 2, "them": [2, 5, 6], "current": 2, "document": [2, 4], "do": [2, 7], "besid": 2, "select": [2, 3, 4, 8], "distribut": [2, 7, 8], "default": [2, 5], "assum": 2, "uniformli": 2, "work": [2, 5, 9], "altern": [2, 7, 9], "normal": [2, 8], "had": 2, "evid": 2, "expect": [2, 7], "about": [2, 7], "varianc": 2, "sigma": [2, 8], "2": [2, 6, 7, 8, 9], "sim": 2, "n": [2, 3, 7, 8, 9], "That": 2, "simplif": 2, "creat": 2, "unaccount": 2, "heteroscedast": 2, "petersen_overleir_2004": 2, "yield": 2, "reason": 2, "could": [2, 4], "incorpor": 2, "intent": 2, "defin": [2, 4, 8], "baselin": 2, "todo": 2, "avaiabl": 3, "pypi": 3, "conda": 3, "forg": 3, "pip": [3, 8], "If": [3, 5, 7, 8], "notebook": [3, 8], "consid": 3, "build": 3, "ipykernel": 3, "acreat": 3, "add": [3, 7], "m": 3, "name": [3, 6, 7, 8, 9], "lab": 3, "kernel": 3, "launcher": 3, "A": [4, 5], "variabl": 4, "costli": [4, 7], "mathemat": 4, "surfac": 4, "elev": 4, "despit": 4, "time": 4, "consum": 4, "To": 4, "promot": 4, "widespread": 4, "reimplement": 4, "classic": [4, 8], "modern": 4, "serv": 4, "benchmark": 4, "instal": [4, 8], "get": 4, "start": 4, "demo": [4, 8], "troubleshoot": 4, "api": 4, "ocassion": 5, "reiniti": 5, "rerun": [5, 8], "powerr": [5, 6, 7, 8], "powerlawr": [5, 6, 7, 8, 9], "problem": 5, "seem": 5, "relat": 5, "initi": [5, 6], "fix": 5, "observ": [5, 7, 8], "decreas": [5, 8], "give": [5, 7, 8, 9], "poorer": 5, "One": [5, 7, 9], "clue": 5, "happen": [5, 8], "bound": 5, "break": 5, "point": 5, "overlap": 5, "try": [5, 8, 9], "instead": 5, "sort": 5, "handl": 5, "slower": [5, 8], "It": [5, 8], "fewer": 5, "too": 5, "few": 5, "experi": 5, "diverg": 5, "dure": 5, "sampl": [5, 7, 8, 9], "mai": [5, 8, 9], "substanti": [5, 7, 8], "affect": [5, 8], "you": [5, 7, 8], "target": 5, "95": [5, 8], "fairli": 5, "high": 5, "99": [5, 8], "999": [5, 8], "ratingmodel": [6, 7, 8, 9], "load": [6, 7, 9], "df": [6, 7, 8, 9], "green": [6, 7, 8], "q_sigma": [6, 7, 8, 9], "trace": [6, 7, 8, 9], "modulenotfounderror": [6, 7, 8, 9], "traceback": [6, 7, 8, 9], "recent": [6, 7, 8, 9], "last": [6, 7, 8, 9], "cell": [6, 7, 8, 9], "4": [6, 7, 8, 9], "modul": [6, 7, 8, 9], "tabl": [6, 8], "list": [6, 8, 9], "perhap": 7, "know": [7, 8], "anoth": [7, 8], "situat": 7, "want": 7, "whichev": 7, "best": 7, "cross": 7, "valid": [7, 8], "portion": 7, "held": 7, "don": 7, "lot": 7, "hold": 7, "degrad": 7, "approach": [7, 8], "criteria": 7, "river": 7, "load_ext": [7, 8, 9], "autoreload": [7, 8, 9], "xmode": 7, "suppress": 7, "warn": [7, 8], "pm": [7, 8, 9], "arviz": [7, 8, 9], "az": [7, 8, 9], "get_ipython": 7, "run_line_mag": 7, "captur": [7, 8], "output": 7, "supress": 7, "print": [7, 8], "finish": [7, 8], "after": [7, 8], "run": [7, 8], "four": 7, "100_000": [7, 9], "append": 7, "compute_log_likelihood": 7, "arg": 7, "likelihood": 7, "format": [7, 8], "loo": 7, "filterwarn": 7, "ignor": 7, "compare_dict": 7, "f": 7, "i": [7, 8], "ic": 7, "rank": 7, "highest": 7, "practic": [7, 9], "deviat": 7, "matplotlib": 7, "pyplot": 7, "plt": 7, "fig": 7, "ax": [7, 8, 9], "subplot": 7, "figsiz": 7, "7": [7, 8], "sharei": 7, "true": [7, 8], "plot_residu": 7, "subplots_adjust": 7, "wspace": 7, "set_ylabel": [7, 8, 9], "There": 8, "googl": 8, "colab": 8, "minut": 8, "repo": 8, "version": 8, "env": 8, "mkl_threading_lay": 8, "gnu": 8, "git": 8, "http": 8, "github": 8, "com": 8, "thodson": 8, "usg": 8, "spliner": [8, 9], "6": [8, 9], "chalk": 8, "artifici": 8, "co": 8, "provo": 8, "datetim": 8, "2020": 8, "05": 8, "21": 8, "14": 8, "13": 8, "41": 8, "utc": 8, "07": 8, "00": 8, "04": 8, "12199": 8, "342": 8, "199": 8, "172931": 8, "16": 8, "55": 8, "31": 8, "43": 8, "4921": 8, "953": 8, "425619": 8, "03": 8, "54": 8, "10": [8, 9], "2331": 8, "665": 8, "61": 8, "860500": 8, "51": 8, "94": 8, "2289": 8, "220": 8, "47": 8, "886745": 8, "01": 8, "23": 8, "11": 8, "32": 8, "96": 8, "2408": 8, "210": 8, "522964": 8, "scatter": [8, 9], "x": [8, 9], "y": [8, 9], "marker": [8, 9], "o": [8, 9], "set_xlabel": [8, 9], "cf": [8, 9], "ft": [8, 9], "compil": 8, "set": 8, "iter": 8, "stop": 8, "loss": 8, "mean_field": [8, 9], "120_000": 8, "5000": [8, 9], "100": 8, "120000": 8, "lt": 8, "averag": 8, "49": 8, "281": 8, "273": 8, "mnt": 8, "onedr": 8, "doi": 8, "desktop": 8, "project": 8, "releas": 8, "py": 8, "318": 8, "runtimewarn": 8, "invalid": 8, "encount": 8, "b1": 8, "np": [8, 9], "h_tile": 8, "hs": 8, "clip": 8, "h0": 8, "20": 8, "1365": 8, "65": 8, "0154": 8, "1378": 8, "06": 8, "22": 8, "1390": 8, "0153": 8, "1402": 8, "89": 8, "24": 8, "1415": 8, "0152": 8, "what": 8, "choos": 8, "wrong": 8, "correct": 8, "topic": 8, "blob": 8, "master": 8, "ipynb": 8, "allow": 8, "scheme": 8, "simulated_r": 8, "sim_df": [8, 9], "len": 8, "763": 8, "everi": 8, "inch": 8, "increment": 8, "much": [8, 9], "d": 8, "15": 8, "30": [8, 9], "see": 8, "subsampl": [8, 9], "random_st": [8, 9], "12345": 8, "color": [8, 9], "grei": 8, "ls": [8, 9], "legend": [8, 9], "fals": [8, 9], "blue": [8, 9], "text": 8, "none": 8, "mu": 8, "8": [8, 9], "150_000": 8, "necessari": 8, "150000": 8, "532": 8, "501": 8, "visual": 8, "summari": 8, "var_nam": 8, "input_shap": 8, "minimum_shap": 8, "chain": 8, "draw": 8, "sd": 8, "hdi_3": 8, "hdi_97": 8, "mcse_mean": 8, "mcse_sd": 8, "ess_bulk": 8, "ess_tail": 8, "r_hat": 8, "968": 8, "001": 8, "965": 8, "971": 8, "000": 8, "4363": 8, "4715": 8, "nan": 8, "072": 8, "004": 8, "065": 8, "079": 8, "5119": 8, "4678": 8, "308": 8, "006": 8, "297": 8, "319": 8, "4866": 8, "4850": 8, "002": 8, "003": 8, "996": 8, "5085": 8, "4869": 8, "010": 8, "007": 8, "012": 8, "4792": 8, "4901": 8, "932": 8, "930": 8, "933": 8, "5105": 8, "4897": 8, "9": 8, "517": 8, "098": 8, "326": 8, "694": 8, "4540": 8, "4761": 8, "759": 8, "030": 8, "702": 8, "814": 8, "5003": 8, "4861": 8, "tricki": 8, "appear": 8, "poor": [8, 9], "step": 8, "strong": 8, "For": [8, 9], "impli": 8, "within": 8, "final": 8, "typic": 8, "underestim": 8, "struggl": 8, "modal": 8, "depend": 8, "your": 8, "cpu": 8, "tune": 8, "1500": 8, "target_accept": 8, "sum_": 8, "b_i": 8, "x_": 8, "h_i": 8, "x_o": 8, "heavisid": 8, "linear": [8, 9], "repres": 8, "respect": 8, "input": 8, "b_o": 8, "subsequ": 8, "flexibl": 9, "fact": 9, "advantag": 9, "veri": 9, "produc": 9, "strang": 9, "particularli": 9, "small": 9, "numpi": 9, "quit": 9, "show": 9, "spline_r": 9, "70_000": 9, "grai": 9, "unexpectedli": 9, "771": 9}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"api": 0, "document": 0, "implement": 2, "parameter": [2, 8], "prior": 2, "optim": 2, "set": 2, "instal": 3, "creat": 3, "jupyt": 3, "environ": 3, "ratingcurv": 4, "troubleshoot": 5, "advi": 5, "nut": 5, "get": 6, "start": 6, "demo": 6, "dataset": 6, "model": [7, 8], "select": 7, "fit": [7, 8], "data": [7, 8], "residu": 7, "analysi": 7, "stage": 8, "discharg": 8, "rate": [8, 9], "us": 8, "segment": 8, "load": 8, "setup": 8, "exercis": 8, "simul": [8, 9], "exampl": 8, "natur": 9, "spline": 9, "green": 9, "river": 9, "excercis": 9}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 6, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "sphinx.ext.viewcode": 1, "sphinxcontrib.bibtex": 9, "sphinx": 56}})